
#图书管理系统项目文档
##组员
邢健开 2017011337
周炫柏 2017011460
张可真 2017011432
尹涵 8字班
##项目需求
###Qt框架
Qt 5.10
Qt Creator 4.6
###编译器
mingw53_32
###mongo数据库：
 客户端地址https://www.mongodb.com/download-center#community
 使用方法：https://docs.mongodb.com/manual/tutorial/install-mongodb-enterprise-on-windows/
采取默认端口27017即可
 c++驱动：在附件中，在win10 x86/64下应该可运行
###boost库：
 在附件中，版本1_67
##使用方法
###图形界面
具体操作在视频GUI.mp4中
在项目-Run-Command line arguments中，加入-m g

![](./_image/2018-07-01-16-38-02.jpg)
####如可以运行mongoDB数据库
1.在LibraryManagementSystem.pro中，取消注释DEFINES += __Database
![](./_image/2018-07-01-16-39-29.jpg)
2.运行
3.注册 
用户名密码长度不小于6
如果注册用户名为adminnn，身份为管理员，否则为读者
**读者界面**
点击搜索，什么都不加为搜索全部，仅支持精确搜索
双击条目可预览图书信息
点击OK可借书
点击下方借书记录可可查看借阅信息
state为checking表示等待管理员批准借书
state为borrowed表示已经借走此书
变为borrowed后双击可发起还书请求
state为returning表示等待管理员批准还书
state为finish表示已还书
**登录管理员界面**
图书tab
可利用搜索查看书籍
双击非id列的条目可修改信息
双击id列可删除此书
单击添加图书可添加书目
用户tab
点击查看用户可查看所有用户
双击非id列可修改用户信息
双击id列可删除用户
记录tab
双击可批准借书/还书申请

####如果无法运行数据库
可用reader用户名登录读者界面，admin登录管理员界面，密码不用填
无法显示数据，只有界面

###命令行界面
在项目-Run-Command line arguments中，加入-m c
可按提示进行注册，登录，退出等操作
管理员界面使用指南（来源：张可真）：
Administrator类
以管理员身份登录后，首先进入主界面：
	Please input orders...(input 'help' to see help page)
输入help可查看帮助页面，具体功能如下：
1）添加书籍
指令：add 或 1
进入输入书籍信息的界面，列出一些书籍信息的可选项，输入
选项前的数字可输入相应信息，选择that's all项可结束编辑。
2）修改书籍信息
指令：modify 或 2
仍然进入输入书籍信息的界面，输入信息搜索制定书籍，之后
会列出搜索到的书籍，输入选项前的数字进行选择（若搜到的
均不是想要的可输入0），之后可进行书籍修改信息的输入，方
法同1）。
3）删除书籍
指令： delete 或 3
仍然进入输入书籍信息的界面，输入信息搜索制定书籍，之后
会列出搜索到的书籍，输入选项前的数字进行选择（若搜到的
均不是想要的可输入0）。
4）审核还书申请
指令：check 或 4
首先会列出正在等待审核的还书申请，输入选项前的数字进行
选择（输入0为不选）。
5）审核借书申请
指令： lend 或 5
同样会列出正在等待审核的借书申请，输入选项前的数字进行
选择（输入0为不选）。
6）添加读者信息
指令： addreader 或 6
进入界面后按照提示依次输入读者的信息。
7）删除读者
指令： removereader 或 7
不允许随意删除读者，只能通过直接提供读者在数据库中的ID
进行删除。
0）退出
指令：quit 或 0
每进行一次操作之后都会自动回到主界面，只有选择退出后可
以结束程序。
##文档
[在线文档](http://doc.jkxing.cn/LibraryManagementSystem) ，由Doxygen生成
文档中包含UML图和各个类的接口
###简要介绍
代码分为用户端，服务端
用户端
初始交互类：负责登录，注册
![](./_image/2018-07-01-22-25-45.jpg)
用户身份：管理员/读者
交互方式：GUI/CMD
![](./_image/2018-07-01-22-26-26.jpg)
服务端
UserControl：管理用户信息，注册，登录验证，更新/添加/删除用户等
![](./_image/2018-07-01-22-27-43.jpg)
RendControl：管理借阅信息
（私有成员未显示）
![](./_image/2018-07-01-22-29-10.jpg)
Shop：管理书籍信息：数量加减/添加删除编辑图书
![](./_image/2018-07-01-22-29-39.jpg)
Searcher：负责搜索，只要输入是条目的子串即可，图形界面搜索支持输入正则表达式（如[0-9]可搜索包含数字的书)。
![](./_image/2018-07-01-22-32-00.jpg)
User-CMD界面：（from 周炫柏）
User类主要为Reader类提供一系列接口，具体功能大部分在Reader中实现。
User类中有一个重要的函数search，是Reader类借书还书操作的底层实现函数。它通过接收用户输入的信息（书名/作者名/标签），然后调用Searcher类中的Searcher::search函数，找到与这些信息相关的书籍并以cursor形式返回出来，User::search再将返回出来的书籍信息全部打印到屏幕上，让用户继续选择具体是哪一本书，然后根据用户的选择将对应书籍的id返回给上层函数。
Reader类为读者与系统内核交互的中间媒介，其中定义了读者可以进行的一系列操作，包括阅读帮助界面（help函数），借书操作（borrow函数），还书操作（giveback函数），查看借阅记录（getborrowlist函数），更改密码（changepassword函数），以及退出系统。借书、还书交由rendingcontrol类进行，分别调用newRendRequest函数和newReturnRequest函数；查看借阅记录交由rendingcontrol类进行，调用getBorrowList函数；更改密码交由usercontrol类进行，调用updateUserInfo函数。值得注意的是，只有在确定读者借阅了某本书籍之后，该本书籍才能被该读者归还。

##分工(代码量)
邢健开：服务端，数据库，图形界面，命令行登录界面（约100KB）
张可真：命令行管理员界面（约15KB）
周炫柏：命令行读者界面，抽象用户类（约10KB)
尹涵：中途退出，没有贡献- -||（0KB）
